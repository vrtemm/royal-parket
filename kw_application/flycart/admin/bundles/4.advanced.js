webpackJsonp([4],{64:function(a,b){"use strict";a.exports=function(a){a.controller("advancedController",["$scope","$rootScope","$http","$base64","$timeout",function(a,b,c,d,e){a.codeMirrorCustomActive=function(b){"custom_css"===b?(a.codeMirrorCustomTabs.custom_css=!0,a.codeMirrorCustomTabs.custom_js=!1,a.codeMirrorCustomTabs.custom_info=!1):"custom_js"===b?(a.codeMirrorCustomTabs.custom_css=!1,a.codeMirrorCustomTabs.custom_js=!0,a.codeMirrorCustomTabs.custom_info=!1):"custom_info"===b&&(a.codeMirrorCustomTabs.custom_css=!1,a.codeMirrorCustomTabs.custom_js=!1,a.codeMirrorCustomTabs.custom_info=!0)},a.fullCustomsOpen=function(){a.fullCustom=!0},a.fullCustomClose=function(){a.fullCustom=!1},a.resetAllOpen=function(){a.resetAll=!0},a.resetAllClose=function(){a.resetAll=!1},a.$watch("tools.advanced_image",function(a,c){Boolean(a)===!1&&(b.tools.advanced_name=!0)},!0),a.$watch("tools.advanced_name",function(a,c){Boolean(a)===!1&&(b.tools.advanced_image=!0)},!0),a.$watch("tools.popup_imgage",function(a,c){Boolean(a)===!1&&(b.tools.popup_name=!0)},!0),a.$watch("tools.popup_name",function(a,c){Boolean(a)===!1&&(b.tools.popup_imgage=!0)},!0),a.codeMirrorCustomTabs={custom_css:!0,custom_js:!1,custom_info:!1},a.resetAllTools=function(){a.resetAll=!1,c.post("index.php?route=module/kw_flycart/resetAll&token="+b.token).then(function(c){"error"===c.data.status?a.notification(c.data.message,"error"):("custom"===c.data.presets[0].preset.effect_type&&(c.data.presets[0].preset.effect_custom_js=d.decode(c.data.presets[0].preset.effect_custom_js)),c.data.presets[0].custom_js&&(c.data.presets[0].custom_js=d.decode(c.data.presets[0].custom_js)),a.apply(!0),b.presets=c.data.presets,b.tools=angular.copy(c.data.presets[0].preset),b.tools.preset=0,a.notification(c.data.message,"success"))})},a.backupId={preset_ids:[]},a.checkAll=function(){a.backupId.preset_ids=a.presets.map(function(a){return a.preset_id})},a.uncheckAll=function(){a.backupId.preset_ids=[]},a.exportTools=function(){if(a.backupId.preset_ids.length>0){var d=new Date,e=d.getDate(),f=d.getMonth()+1,g=d.getFullYear();a.preset_ids=a.backupId.preset_ids,c.post("index.php?route=module/kw_flycart/exportTools&token="+b.token,{preset_ids:a.preset_ids}).then(function(b){if("error"===b.data.status)a.notification(b.data.message,"error");else{var c=new Blob([b.data],{type:"application/octet-stream"}),d=URL.createObjectURL(c),h=document.createElement("a");h.href=d,h.target="_blank",h.download=g+"_"+f+"_"+e+"_flycart_presets_backup.sql",document.body.appendChild(h),h.click()}})}},a.uploadSuccess=function(c,d){var f=a.$eval(d);"success"===f.status?(e(function(){b.presets=f.presets}),a.notification(f.message,"success")):a.notification(f.message,"error"),c.flowObj.files=[]}}])}}});